/**
 * @fileoverview Wrapper around unix find.
 */
'use strict';
var co = require('co');
var exec = require('mz/child_process').exec;

module.exports = co.wrap(regeneratorRuntime.mark(function callee$0$0(dirname) {
  var results, files;
  return regeneratorRuntime.wrap(function callee$0$0$(context$1$0) {
    while (1) switch (context$1$0.prev = context$1$0.next) {
      case 0:
        context$1$0.next = 2;
        return exec('find . ! -path "*node_modules*"', {
          cwd: dirname
        });

      case 2:
        results = context$1$0.sent;

        if (!(!results || !results.length)) {
          context$1$0.next = 5;
          break;
        }

        return context$1$0.abrupt('return', []);

      case 5:
        files = results[0].split(/\n/);
        return context$1$0.abrupt('return', files.filter(function (filename) {
          return typeof!/^\s*$/.test(filename);
        }));

      case 7:
      case 'end':
        return context$1$0.stop();
    }
  }, callee$0$0, this);
}));